!function(){var a=5000;var b=window.location.href;var k=window.location.hostname;var c=window.location.pathname;var n=window.location.host;var o=(new Date).getTime();function i(p){if(j()){j().sendResource(JSON.stringify(p))}}function j(){if(window.woodWatcher){return window.woodWatcher}if(window.webkit){if(window.webkit.messageHandlers){if(window.webkit.messageHandlers.woodWatcher){return window.webkit.messageHandlers.woodWatcher}}}return null}function d(s){var r=s.loadEventEnd-s.navigationStart;var q=1;if(r>5000){q=0.8}else{if(r>2000){q=0.9}}function p(v,u){var t=u+Math.floor((v-u)*q);return t}return{navigationStart:s.navigationStart,redirectStart:s.redirectStart,redirectEnd:s.redirectEnd,fetchStart:s.fetchStart,domainLookupStart:s.domainLookupStart,domainLookupEnd:s.domainLookupEnd,connectStart:s.connectStart,secureConnectionStart:s.secureConnectionStart?s.secureConnectionStart:s.connectEnd-s.secureConnectionStart,connectEnd:s.connectEnd,requestStart:s.requestStart,responseStart:p(s.responseStart,s.requestStart),responseEnd:p(s.responseEnd,s.requestStart),unloadEventStart:p(s.unloadEventStart,s.requestStart),unloadEventEnd:p(s.unloadEventEnd,s.requestStart),domLoading:p(s.domLoading,s.requestStart),domInteractive:p(s.domInteractive,s.requestStart),domContentLoadedEventStart:p(s.domContentLoadedEventStart,s.requestStart),domContentLoadedEventEnd:p(s.domContentLoadedEventEnd,s.requestStart),domComplete:p(s.domComplete,s.requestStart),loadEventStart:p(s.loadEventStart,s.requestStart),loadEventEnd:p(s.loadEventEnd,s.requestStart)}}var l=function(){function q(r){if(!window.performance||!window.performance.timing){return{}}var s=window.performance.timing;if(r){s=d(s)}return{navigationStart:s.navigationStart,redirectStart:s.redirectStart,redirectEnd:s.redirectEnd,fetchStart:s.fetchStart,domainLookupStart:s.domainLookupStart,domainLookupEnd:s.domainLookupEnd,connectStart:s.connectStart,secureConnectionStart:s.secureConnectionStart?s.secureConnectionStart:s.connectEnd-s.secureConnectionStart,connectEnd:s.connectEnd,requestStart:s.requestStart,responseStart:s.responseStart,responseEnd:s.responseEnd,unloadEventStart:s.unloadEventStart,unloadEventEnd:s.unloadEventEnd,domLoading:s.domLoading,domInteractive:s.domInteractive,domContentLoadedEventStart:s.domContentLoadedEventStart,domContentLoadedEventEnd:s.domContentLoadedEventEnd,domComplete:s.domComplete,loadEventStart:s.loadEventStart,loadEventEnd:s.loadEventEnd,pageTime:o}}function p(){if(!window.performance||!window.performance.getEntriesByType){return[]}for(var w=window.performance.getEntriesByType("resource"),r=[],v=0;v<w.length;v++){var u=w[v].secureConnectionStart?w[v].secureConnectionStart:w[v].connectEnd-w[v].secureConnectionStart,s={connectEnd:w[v].connectEnd,connectStart:w[v].connectStart,domainLookupEnd:w[v].domainLookupEnd,domainLookupStart:w[v].domainLookupStart,duration:w[v].duration,entryType:w[v].entryType,fetchStart:w[v].fetchStart,initiatorType:w[v].initiatorType,name:w[v].name,redirectEnd:w[v].redirectEnd,redirectStart:w[v].redirectStart,requestStart:w[v].requestStart,responseEnd:w[v].responseEnd,responseStart:w[v].responseStart,secureConnectionStart:u,startTime:w[v].startTime};r.push(s)}return r}return{cacheResourceTimingLength:0,getNavigationTiming:function(r){return q(r)},getResourceTiming:function(){var s=p();var r=s.length;return s.length!=this.cacheResourceTimingLength?(s=s.slice(this.cacheResourceTimingLength,r),this.cacheResourceTimingLength=r,s):[]}}}();var h={type:"monitor_resourceTiming",payload:{url:b,domain:k,uri:c,navigationTiming:l.getNavigationTiming(true),resourceTiming:l.getResourceTiming()}};i(h);var m=function(){var q=l.getResourceTiming();if(q.length>0){var p={type:"monitor_resourceTiming",payload:{url:b,domain:k,uri:c,navigationTiming:{},resourceTiming:q,}}}};var g=!0;window.addEventListener("beforeunload",function(){g&&(g=!1,m())});window.addEventListener("unload",function(){g&&(g=!1,m())});var e=function(){var p=[];return window.addEventListener&&window.addEventListener("error",function(r){var q={};q.time=r.timeStamp||(new Date).getTime(),q.url=r.filename,q.msg=r.message,q.line=r.lineno,q.column=r.colno,r.error?(q.type=r.error.name,q.stack=r.error.stack):(q.msg.indexOf("Uncaught ")>-1?q.stack=q.msg.split("Uncaught ")[1]+" at "+q.url+":"+q.line+":"+q.column:q.stack=q.msg+" at "+q.url+":"+q.line+":"+q.column,q.type=q.stack.slice(0,q.stack.indexOf(":"))),q.type.toLowerCase().indexOf("script error")>-1&&(q.type="ScriptError"),p.push(q)},!1),{getError:function(){return p.splice(0,p.length)}}}();function f(){var p=e.getError();if(p.length>0){var q={type:"monitor_error",payload:{url:b,domain:k,uri:c,error_list:p}};if(j()){j().sendError(JSON.stringify(q))}}}f()}();