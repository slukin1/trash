(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1abbc734"],{1549:function(t,n,a){"use strict";var e=function(){var t=this,n=t._self._c;return n("div",{staticClass:"btn"},[t._t("default"),n("p",{staticClass:"button",class:{active:t.canClick},on:{click:t.btnClick}},[t.loading?n("span",{staticClass:"btn-loading"}):t._e(),t.loading?t._e():n("span",[t._v(t._s(t.btnTextVal))])])],2)},s=[],o=a("ca00"),i={props:{btnText:{type:String,default:""},loading:{type:Boolean,default:!1},canClick:{type:Boolean,default:!1}},data(){return{}},computed:{btnTextVal(){return this.btnText||this.$$t("{#提交#}")}},created(){},methods:{ts:o["k"],btnClick(){this.$emit("btnClick")}}},c=i,r=(a("4d1d"),a("2877")),l=Object(r["a"])(c,e,s,!1,null,"74d603cb",null);n["a"]=l.exports},"2bba":function(t,n,a){"use strict";a("955b")},"4d1d":function(t,n,a){"use strict";a("a4e1")},"66e0":function(t,n,a){"use strict";var e=function(){var t=this,n=t._self._c;return n("div",{staticClass:"head"},[n("img",{attrs:{src:a("e669")},on:{click:t.goBack}})])},s=[],o=a("aa0e"),i=a.n(o),c={props:{backPage:{type:String,default:""}},methods:{goBack(){"app"===this.backPage?i()("20010006",()=>{}):window.history.go(-1)}}},r=c,l=(a("e931"),a("2877")),u=Object(l["a"])(r,e,s,!1,null,"787cb26c",null);n["a"]=u.exports},"6be5":function(t,n,a){},"8e09":function(t,n,a){"use strict";a.r(n);var e=function(){var t=this,n=t._self._c;return n("div",{staticClass:"main"},[t.showLoading?n("Loading"):t._e(),t.showLoading?t._e():n("div",[n("h1",{staticClass:"title"},[t._v(t._s(t.$$t("{#请上传证件照片#}")))]),n("p",{staticClass:"desc"},[t._v(t._s(t.$$t("{#请选择证件类型#}")))]),n("van-form",{ref:"formDataRef"},[n("van-field",{staticClass:"triangle country",attrs:{readonly:"",clickable:"",name:"picker",value:t.nationalityName,label:"",placeholder:t.$$t("{#请选择国籍#}"),rules:[{required:!0,message:t.$$t("{#请选择国籍#}")}]},on:{click:function(n){return t.chooseCountry("nationality")}},scopedSlots:t._u([{key:"button",fn:function(){return[n("i",{staticClass:"national-flag",style:{background:`url(${t.getCountryFlag(t.nationality)}) center/contain no-repeat`}})]},proxy:!0}],null,!1,2864617522)})],1),n("ul",{staticClass:"auth-box"},t._l(t.cardList,(function(a,e){return n("li",{key:a.type,class:[t.cur==e?"auth-type active":"auth-type"],attrs:{"data-type":a.type,"data-index":e},on:{click:function(n){return t.changeCardType(e)}}},[n("span",{class:"item"+a.type}),n("p",[t._v(t._s(t.cardName[a.type]))]),n("i")])})),0),n("Btn",{attrs:{"btn-text":t.$$t("{#下一步#}"),"can-click":t.cur>=0},on:{btnClick:t.goNext}},[0===t.isDigital?n("van-checkbox",{staticClass:"checkbox",model:{value:t.checked,callback:function(n){t.checked=n},expression:"checked"}},[t._v(" "+t._s(t.$$t("{#同时申请成为多米尼克元宇宙数字公民#}"))+" ")]):t._e()],1)],1),n("CountryPopup",{attrs:{"show-popup":t.showPopup,"country-list":t.countryList},on:{closePopup:t.closePopup,onConfirm:t.onConfirm}})],1)},s=[],o=(a("14d9"),a("5c96")),i=a("aa0e"),c=a.n(i),r=a("66e0"),l=a("f3e4"),u=a("7c15"),d=a("d938"),p=a("ca00"),h=a("1549"),A=a("c6f6"),f={data(){return{cur:-1,lang:l["a"].get("lang"),cardName:{1:this.$$t("{#身份证#}"),2:this.$$t("{#护照#}"),3:this.$$t("{#驾照#}"),4:this.$$t("{#数字公民ID#}")},cardList:[],showLoading:!0,isDm:!1,nationality:37,nationalityName:"",countryList:[],showPicker:!1,checked:!1,isDigital:0,showPopup:!1}},components:{Header:r["a"],Loading:d["a"],Btn:h["a"],CountryPopup:A["a"]},created(){window.sensors.track("h5_kyc_self_expose",{pageId:this.$store.state.stageData.authBizCode}),c()("20010037",{backgroundColor:"#ffffff",titleColor:"#14181F",lineColor:"#ffffff"}),this.init(),this.isDm="true"===Object(p["h"])("isDm")||!0===Object(p["h"])("isDm")},methods:{getCountryFlag:p["g"],async init(){const t=this,{lang:n}=this;await t.getCountryList();const{success:a,message:e,data:{baseInfo:{realCountryId:s}}}=await Object(u["i"])({authBizCode:"SPOT"});if(a){const a=s||37,e=t.countryList.find(t=>t.countryId===a)||{};t.nationality=a,t.nationalityName="zh-cn"===n?e.nameCn:e.nameEn,t.getCardList()}else this.showToast(e)},chooseCountry(){this.showPopup=!0},closePopup(){this.showPopup=!1},onConfirm(t){this.nationality=t.countryId,this.nationalityName="zh-cn"===this.lang?t.nameCn:t.nameEn,this.showPicker=!1,this.getCardList()},changeCardType(t){window.sensors.track("h5_kyc_self_cardType_click"),this.cur=t},goNext(){if(this.cur<0)return;window.sensors.track("h5_kyc_self_next_click");const{cur:t,cardList:n,nationality:a,checked:e}=this,s=n[t]&&n[t].type,o=Object(p["h"])("modify");this.$pushState(`/mkyc/photo?cardType=${s}&nationality=${a}&syncDigital=${e?1:0}&modify=${o}`)},showToast(t){o["Message"].error({duration:2e3,offset:52,customClass:"is-error",message:t,onClose(){c()("20010006",()=>{})}})},async getCountryList(){const t=this,{success:n,data:a,message:e}=await Object(u["o"])();n?this.countryList=a:t.showToast(e)},async getCardList(){const t=this,n=t.nationality,{success:a,message:e,data:s,data:{isDigital:o,authSubType:i}}=await Object(u["m"])({authBizCode:"SPOT",countryId:n});a?(t.isDigital=o,i.length>0?(t.cardList=[],i.forEach(n=>{const a=[];n.authSubType.length>0&&n.authSubType.forEach(t=>{a.push(t)}),t.cardList.push({type:n.authType,subName:a}),t.showLoading=!1})):(t.cardList=[],t.showToast(t.$$t("{#当前国家不支持KYC验证流程，请联系客服处理#}")))):(t.cardList=[],this.showToast(e))}}},y=f,C=(a("a2c1"),a("2877")),g=Object(C["a"])(y,e,s,!1,null,"6dfaab98",null);n["default"]=g.exports},"955b":function(t,n,a){},a2c1:function(t,n,a){"use strict";a("6be5")},a4e1:function(t,n,a){},c6f6:function(t,n,a){"use strict";var e=function(){var t=this,n=t._self._c;return n("van-popup",{attrs:{position:"bottom",round:"","z-index":"1900"},on:{"click-overlay":t.closePopup},model:{value:t.showPopupModel,callback:function(n){t.showPopupModel=n},expression:"showPopupModel"}},[n("div",[n("div",{staticClass:"popup-header"},[n("span",{staticClass:"back",on:{click:t.closePopup}}),n("van-search",{attrs:{"left-icon":t.leftIcon,placeholder:t.$$t("{#搜索国家和地区#}")},model:{value:t.filterWords,callback:function(n){t.filterWords=n},expression:"filterWords"}}),n("span",{on:{click:t.closePopup}},[t._v(t._s(t.$$t("{#取消#}")))])],1),n("ul",{staticClass:"popup-content"},t._l(t.finallyCountryList,(function(a){return n("li",{key:a["country_id"]||a["countryId"],on:{click:function(n){return t.handleClick(a)}}},[n("i",{staticClass:"national-flag",style:{background:`url(${t.getCountryFlag(a.countryId||a.country_id)}) center/contain no-repeat`}}),n("span",[t._v(" "+t._s("zh-cn"===t.lang?a["nameCn"]||a["name_cn"]:a["nameEn"]||a["name_en"])+" ")])])})),0)])])},s=[],o=a("f3e4"),i=a("ca00");const c=a("d079");var r={props:{countryList:{type:Array,default:()=>[]},showPopup:{type:Boolean,default:!1},addressType:{type:String,default:"country"}},data(){return{lang:o["a"].get("lang"),showPopupModel:!1,filterWords:"",leftIcon:c,finallyCountryList:[]}},watch:{showPopup:{handler(t){this.showPopupModel=t}},filterWords:{handler(t){const n=t.toLowerCase();this.finallyCountryList=t?this.countryList.filter(t=>t.nameCn?t.nameEn.toLowerCase().indexOf(n)>=0||t.nameCn.indexOf(n)>=0:t.name_cn?t.name_en.toLowerCase().indexOf(n)>=0||t.name_cn.indexOf(n)>=0:void 0):this.countryList}},countryList:{handler(t){console.log("val :>> ",t),this.finallyCountryList=t}}},methods:{getCountryFlag:i["g"],closePopup(){this.$emit("closePopup")},handleClick(t){this.$emit("onConfirm",t),this.closePopup()}}},l=r,u=(a("e9d8"),a("2877")),d=Object(u["a"])(l,e,s,!1,null,"56f5adc4",null);n["a"]=d.exports},d079:function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAWCAYAAADafVyIAAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJdSURBVHgBtVVdchJBEO4eCODbHmHyGMWSrSRaSFnCCcQTBE4QbhA4AeYGeILEE8CLQhl1sYzoW/YIW6WWbGqZtmdhlw27wGJVvgeYv+5vpvvrXoB7Bq7bsCzL+O1lS3vZzCtQIAnRQCJnpuirAjV4cfx4AP9LMLJ+niql2rxpbLC1mahTOSz2IC2BvvWUChdAVIW0ENgumwedVASjLxOLCErBnAAcVHROOBsjoUNI/KJsHRFe8rZMQxISjKxJlxS0QucE5w8ybts0TWfVaGj9kKSoy8b1YI3D1UwKF84NLAkqfxMeVtSpHD9qwxZ8+DTp8WtOFo6cvHD3Vy8k5h5zZxHOXhrnGm7Gbekw6jH/G3+9fGP1jFg4rQYLnvLeQkrU+LY6R8u7xcUhdDxhkTD9zLT6DpEVvdA/4pMYAXieDCac2DHsCFaPHZnKGEGGvDApJDYWViL6XDub9sWfPbDDCYG0thisosDtJBgTxiMganNZ2f4BVsKvWb4Ku0CIk2DIxRgn8H8VhcrZQ+imfYVfP4CNYJ6kQJ9gmr19E+iZIacq14U0zlW+H1mykxToE+gwCaUivQQbw8+Tm/cfr0tJzrmC6wvncrlKg6Szd5rd8Op7mxvX2Z0DnDji2KIghxQaBFRf18Z5/ZLbRTPaLmLfgySSDbCJ1DtEcRpdg1u3Vi6btp6IVYuy7kMC97no1rYMP1/cEAvCNZ8fFVt6HNmWkMv3h0MtgA2fzOWLvlWVQIlKGCSUAzMYV54WY3IcXV23SIiIOLBXPjxobiXYBVoUIiMueCi5aF8/O3p4+Q/Z/QV6pG16wwAAAABJRU5ErkJggg=="},d938:function(t,n,a){"use strict";var e=function(){var t=this;t._self._c;return t._m(0)},s=[function(){var t=this,n=t._self._c;return n("div",{staticClass:"loading-container"},[n("div",{staticClass:"loading-img"})])}],o={name:"Loading",components:{},props:{},data(){return{}},created(){},methods:{}},i=o,c=(a("2bba"),a("2877")),r=Object(c["a"])(i,e,s,!1,null,"0610fe42",null);n["a"]=r.exports},dc92:function(t,n,a){},e669:function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIHSURBVHgB5ZsxTsNAEEVnY0AisogipUiFOIrpuFVMx1UouQF0lHCDQEUkCkcKIREg44nkIOQ43rV3ZzOzr6Chek8pLO2fCDwyGl9M+vFZslzMH8ATEXgC5QHyFEAl/XgAviJ4CfAnX+IvAnmAqnyJnwikAerlS+gjkAVoli9RyWk8mH4u5s9AwBEQoC9fkMPTz7p3B0QocIyp/PdaXWbZNAMinAY4dHnEWQAO8oiTAFzkEesBOMkjVgNwk0esBeAoj1gJwFUe6RyAszzSKQB3eaR1AAnySKsAUuQR4wCS5BGjANLkEe0AEuURrQBS5ZHGAJLlkb0BpMsjtQFCkEd2BghFHqkECEke+RfASF4I2wAhyiObAKHKIypkeaQHBI8jh0y0XGT3/XiIERIIkM3jaMgRtq/DAUbI8c+uD6G0+N8ENFDFh9AX8w+hyj7A6JegYBxFcHVyPLxdrbIVMGTnQCKkCLULkVAi7J3IhBChcSMkPYLWSEpyBO2VmNQIRjM5iRGMd4LSIrQaSkqK0HopKiVCp6mshAidt8LcI1gZS3OOYG0tzjWC1bk8xwjW7wW4RXByMMEpgrOLES4RnJ7McIjg/Gbo0COQHE2ZRuhFarb8yB6BALKrMf0I+fX77OUGiCC9G2yOUMi/vaZACPnlaH0EennEy+1wNYIfee/gM9xofJ6CR34BVW0JeIvm+VsAAAAASUVORK5CYII="},e931:function(t,n,a){"use strict";a("f46e")},e9d8:function(t,n,a){"use strict";a("dc92")},f46e:function(t,n,a){}}]);