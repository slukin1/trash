(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-042bf844"],{"2bba":function(s,t,e){"use strict";e("955b")},"5b42":function(s,t,e){"use strict";e("5b66")},"5b66":function(s,t,e){},"955b":function(s,t,e){},b485:function(s,t,e){"use strict";e.r(t);var o=function(){var s=this,t=s._self._c;return t("section",{staticClass:"c1-result"},[s.showLoading?t("Loading"):t("div",{staticClass:"content"},[t("p",{class:"logo logo-"+s.c1Info.state}),1===s.c1Info.state?[t("p",{staticClass:"title"},[s._v(s._s(s.$$t("{#认证中#}")))]),t("p",{staticClass:"desc",domProps:{innerHTML:s._s(s.ts(s.$$t("{#预计%s秒内完成审核#}"),"<em>60</em>"))}}),t("div",{staticClass:"btn"},[t("p",{staticClass:"button",on:{click:s.btnClick}},[s._v(s._s(s.$$t("{#返回认证中心#}")))])])]:2===s.c1Info.state?[t("p",{staticClass:"title"},[s._v(s._s(s.$$t("{#认证完成#}")))]),t("p",{staticClass:"desc",domProps:{innerHTML:s._s(s.ts(s.$$t("{#%s认证已通过#}"),"L2"))}}),t("div",{staticClass:"btn"},[t("p",{staticClass:"button",domProps:{innerHTML:s._s(s.ts(s.$$t("{#继续进行%s认证#}"),"L3"))},on:{click:s.btnClick}})])]:[t("p",{staticClass:"title"},[s._v(s._s(s.$$t("{#认证失败#}")))]),t("p",{staticClass:"desc",domProps:{innerHTML:s._s(s.c1Info.reason)}}),t("div",{staticClass:"btn"},[s.c1Info.isManual?t("p",{staticClass:"button-artificial",on:{click:s.btnClick}},[s._v(" "+s._s(s.$$t("{#申请人工审核#}"))+" ")]):s._e(),t("p",{class:s.c1Info.isManual?"button-again":"button",on:{click:s.btnClick}},[s._v(" "+s._s(s.$$t("{#重新认证#}"))+" ")])])]],2)],1)},c=[],i=e("aa0e"),a=e.n(i),n=e("5c96"),r=e("f3e4"),l=e("d938"),u=e("7c15"),d=e("ca00"),g={components:{Loading:l["a"]},data(){return{lang:r["a"].get("lang"),showLoading:!0,c1Info:{}}},created(){this.init()},destroyed(){clearInterval(this.c1InfoTimer)},methods:{ts:d["k"],showToast(s){n["Message"].error({duration:2e3,offset:52,customClass:"is-error",message:s,onClose(){a()("20010006",()=>{})}})},init(){this.getC1InfoFun(),clearInterval(this.c1InfoTimer),this.c1InfoTimer=setInterval(()=>{if(this.c1Info&&1!==this.c1Info.state)return clearInterval(this.c1InfoTimer);this.getC1InfoFun()},2e3)},async getC1InfoFun(){const{success:s,data:t,message:e}=await Object(u["j"])();s?(this.showLoading=!1,this.c1Info=t):this.showToast(e)},btnClick(){const{c1Info:{state:s}}=this;1===s?this.goAuth():2===s?this.goC2():this.$pushState("/mkyc/card")},goC2(){woodpecker&&woodpecker.metrics&&woodpecker.metrics.gauge("kyc_c2_living",1,"开始活体");const s=this;a()("20010087",({code:t,msg:e,data:o=null})=>{0===t?(s.showToast(e),woodpecker&&woodpecker.metrics&&woodpecker.metrics.gauge("kyc_c2_living",1,"调app活体失败")):200===t?o?(this.uploadPic(Object(d["e"])(o),e),woodpecker&&woodpecker.metrics&&woodpecker.metrics.gauge("kyc_c2_living",1,"华为活体")):(n["Message"].success({duration:2e3,offset:52,customClass:"is-success",message:s.$$t("{#提交成功#}"),onClose(){s.goAuth()}}),woodpecker&&woodpecker.metrics&&woodpecker.metrics.gauge("kyc_c2_living",1,"jumio活体")):(woodpecker&&woodpecker.metrics.gauge("kyc_c2_living",1,"调app活体失败"),s.goAuth())})},async uploadPic(s,t){const e=this,o={fileExtensionName:"."+s.type.split("/")[1],fileType:5},{success:c,message:i,data:a}=await Object(u["q"])(o);c?Object(u["x"])(a.url,s).then(()=>{e.livingSubmitFun(a.fileKey,t)}).catch(s=>{e.showToast(s),woodpecker&&woodpecker.metrics.gauge("kyc_c2_living_upload",1,"活体上传失败")}):e.showToast(i)},async livingSubmitFun(s,t){const e=this;Object(u["s"])({reasonCode:200,livingBody:s,ticket:t}).then(s=>{200===s.code?n["Message"].success({duration:2e3,offset:52,customClass:"is-success",message:e.$$t("{#提交成功#}"),onClose(){e.goAuth()}}):e.showToast(s.message)}).catch(s=>{woodpecker&&woodpecker.metrics&&woodpecker.metrics.gauge("kyc_c3_submit",1,"c3提交接口报错"),n["Message"].error({duration:2e3,offset:52,customClass:"is-error",message:s,onClose(){e.goAuth()}})})},goAuth(){a()("20010006",()=>{})}}},p=g,f=(e("5b42"),e("2877")),h=Object(f["a"])(p,o,c,!1,null,"73ded338",null);t["default"]=h.exports},d938:function(s,t,e){"use strict";var o=function(){var s=this;s._self._c;return s._m(0)},c=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"loading-container"},[t("div",{staticClass:"loading-img"})])}],i={name:"Loading",components:{},props:{},data(){return{}},created(){},methods:{}},a=i,n=(e("2bba"),e("2877")),r=Object(n["a"])(a,o,c,!1,null,"0610fe42",null);t["a"]=r.exports}}]);