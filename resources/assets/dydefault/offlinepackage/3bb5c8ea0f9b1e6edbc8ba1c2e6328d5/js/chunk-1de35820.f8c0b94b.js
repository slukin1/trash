(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1de35820"],{"01e1":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("section",{staticClass:"upload"},[e("h3",[t._v(t._s(t.$$t("{#上传文件#}")))]),e("p",{staticClass:"format"},[t._v(t._s(t.$$t("{#支持JPG、JPEG、PNG格式。#}")))]),e("div",{staticClass:"upload-btn",on:{click:t.select}},[e("em"),t._v(" "+t._s(t.loading?t.$$t("{#上传中...#}"):t.$$t("{#上传文件#}"))+" ")]),e("ul",{staticClass:"file-list"},t._l(t.fileList,(function(s,a){return e("li",{key:a},[e("span",{staticClass:"file-name",domProps:{innerHTML:t._s(t.ts(t.$$t("{#照片%s#}"),a+1))}}),e("span",{staticClass:"file-check",on:{click:function(e){return t.check(s)}}},[t._v(t._s(t.$$t("{#预览#}")))]),e("span",{staticClass:"line"}),e("span",{staticClass:"remove",on:{click:function(e){return t.removeFile(a)}}})])})),0)])},n=[],o=s("aa0e"),i=s.n(o),r=s("5c96"),c=s("7c15"),l=s("ca00"),u=s("8ff9"),d={props:{fileList:{type:Array,default(){return[]}},limit:{type:Number,default:100}},data(){return{loading:!1}},created(){},methods:{ts:l["k"],select(){this.loading||(this.fileList.length>=this.limit?this.showToast(this.$$t("{#最多上传6个文件#}")):i()("20010080",{supportCamera:1,supportAlbum:1},({data:t})=>{t&&t.picture&&this.uploadPic(Object(l["e"])(t.picture),t.picture)}))},async uploadPic(t,e){const s=this;try{await Object(u["a"])(t),this.loading=!0;const a={fileExtensionName:"."+t.type.split("/")[1],fileType:1},{success:n,message:o,data:i}=await Object(c["q"])(a);if(n){const a=new Date;Object(c["x"])(i.url,t).then(()=>{const t=new Date;window.sensors.track("h5_kyc_self_upload_time",{time:t-a,desc:"毫秒"}),this.loading=!1,s.$emit("addFile",{fileKey:i.fileKey,base64:e})}).catch(t=>{this.loading=!1,s.showToast(t)})}else this.loading=!1,s.showToast(o)}catch(a){this.loading=!1,s.showToast(a)}},showToast(t){r["Message"].error({duration:2e3,offset:52,customClass:"is-error",message:t,onClose(){}})},removeFile(t){this.$emit("removeFile",t)},check(t){ImagePreview({images:[t.base64],showIndex:!1})}}},m=d,p=(s("d734"),s("ef32"),s("2877")),h=Object(p["a"])(m,a,n,!1,null,"8d898f0c",null);e["a"]=h.exports},"6ae0":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"contain"},[e("div",{staticClass:"contain-box"},[t.isReplenish?t._e():e("div",{staticClass:"place"},t._l(t.PLACE,(function(s,a){return e("div",{key:a},[e("h3",[t._v(t._s(s.title))]),t._l(s.desc,(function(s,a){return e("p",{key:a},[t._v(" "+t._s(s)+" ")])}))],2)})),0),t.isReplenish?t._e():e("div",{staticClass:"bg"}),e("div",{staticClass:"form-box"},[e("van-form",{ref:"formDataRef"},[e("van-field",{attrs:{name:"companyName",label:t.$$t("{#公司名称#}"),placeholder:t.$$t("{#请填写公司名称#}"),"show-error-message":"true",rules:[{required:!0,message:t.$$t("{#请填写公司名称#}")}]},model:{value:t.formData.companyName,callback:function(e){t.$set(t.formData,"companyName",e)},expression:"formData.companyName"}}),e("van-field",{class:["triangle",{country:t.formData.companyCountryId}],attrs:{readonly:"",clickable:"",name:"picker",value:t.formData.companyCountryName,label:t.$$t("{#公司所在国家或地区#}"),placeholder:t.$$t("{#请选择#}"),rules:[{required:!0,message:t.$$t("{#请选择公司所在国家或地区#}")}]},on:{click:function(e){return t.chooseCountry("companyCountryId")}},scopedSlots:t._u([t.formData.companyCountryId?{key:"button",fn:function(){return[e("i",{staticClass:"national-flag",style:{background:`url(${t.getCountryFlag(t.formData.companyCountryId)}) center/contain no-repeat`}})]},proxy:!0}:null],null,!0)}),e("van-field",{staticClass:"address-textarea",attrs:{label:t.$$t("{#公司地址#}"),rows:"3",maxlength:"500",autosize:"",type:"textarea",rules:[{required:!0,message:t.$$t("{#请输入公司地址#}")}],"show-error-message":"true",placeholder:t.$$t("{#公司地址（精确到门牌号）#}")},on:{blur:function(e){return t.validSubmitStatus()}},model:{value:t.formData.companyAddress,callback:function(e){t.$set(t.formData,"companyAddress",e)},expression:"formData.companyAddress"}}),t.isReplenish?t._e():[e("van-field",{class:["triangle",{country:t.formData.countryId}],attrs:{readonly:"",clickable:"",name:t.$$t("{#国家#}"),value:t.formData.countryName,label:t.$$t("{#填写居住地址：#}"),placeholder:t.$$t("{#请选择国家或地区#}"),rules:[{required:!0,message:t.$$t("{#请选择国家或地区#}")}]},on:{click:function(e){return t.chooseCountry("countryId")}},scopedSlots:t._u([t.formData.countryId?{key:"button",fn:function(){return[e("i",{staticClass:"national-flag",style:{background:`url(${t.getCountryFlag(t.formData.countryId)}) center/contain no-repeat`}})]},proxy:!0}:null],null,!0)}),e("van-field",{staticClass:"address-textarea",attrs:{label:" ",rows:"3",maxlength:"500",autosize:"",type:"textarea",rules:[{required:!0,message:t.$$t("{#请输入详细地址#}")}],"show-error-message":"true",placeholder:t.$$t("{#详细地址（精确到门牌号）#}")},on:{blur:function(e){return t.validSubmitStatus()}},model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address",e)},expression:"formData.address"}})]],2)],1),t.isReplenish?t._e():e("div",{staticClass:"bg"}),t.isReplenish?t._e():e("div",{staticClass:"upload"},[e("vant-upload",{attrs:{"file-list":t.fileList,limit:6},on:{removeFile:t.removeFile,addFile:t.addFile}})],1),e("div",{staticClass:"btn"},[e("div",{class:["btn-box",{active:t.isSubmit}],on:{click:t.submit}},[e("span",[t._v(t._s(t.$$t("{#提交#}")))])])]),e("CountryPopup",{attrs:{"show-popup":t.showPopup,"country-list":t.countryList},on:{closePopup:t.closePopup,onConfirm:t.onConfirm}})],1)])},n=[],o=(s("14d9"),s("5c96")),i=s("f3e4"),r=s("01e1"),c=s("7c15"),l=s("ca00"),u=s("c6f6"),d=s("aa0e"),m=s.n(d),p={data(){return{lang:i["a"].get("lang"),fileList:[],PLACE:[{title:this.$$t("{#居住地址证明文件必须达到下列标准：#}"),desc:[this.$$t("{#文件上的姓名必须与提交证件上的姓名相同#}"),this.$$t("{#文件上的地址必须与输入的居住地址相同#}"),this.$$t("{#必须为最近三个月内的文件#}"),this.$$t("{#姓名/地址/发证日期和发证单位皆应清晰可见#}"),this.$$t("{#上传JPG、JPEG、PNG档案大小不得超过5MB#}")]},{title:this.$$t("{#所有支持的文档：#}"),desc:[this.$$t("{#公用事业服务（如电力、水、污水处理）市政账单#}"),this.$$t("{#市政费率和税费报表#}"),this.$$t("{#互联网服务账单#}"),this.$$t("{#银行对账单#}"),this.$$t("{#法人团体声明#}"),this.$$t("{#建筑管理声明#}"),this.$$t("{#固定电话账单（不接受移动账单）#}")]}],authing:!1,showPopup:!1,countryList:[],chooseType:"",choosedName:"",isSubmit:!1,formData:{countryId:"",countryName:"",address:"",companyName:"",companyAddress:"",companyCountryId:"",companyCountryName:""},isReplenish:!1}},components:{Message:o["Message"],VantUpload:r["a"],CountryPopup:u["a"]},created(){this.getCountryList()},methods:{getCountryFlag:l["g"],async getCountryList(){const t=this,{success:e,data:s,message:a}=await Object(c["o"])();e?this.countryList=s:t.showToast(a)},addFile(t){this.fileList.push(t),this.validSubmitStatus()},removeFile(t){this.fileList.splice(t,1),this.validSubmitStatus()},showToast(t){o["Message"].error({duration:2e3,offset:52,customClass:"is-error",message:t,onClose(){}})},chooseCountry(t){this.currentCountryType=t,this.showPopup=!0},closePopup(){this.showPopup=!1},onConfirm(t){const{currentCountryType:e,formData:s,lang:a}=this;"countryId"===e?(s.countryId=t.countryId,s.countryName="zh-cn"===a?t.nameCn:t.nameEn):(s.companyCountryId=t.countryId,s.companyCountryName="zh-cn"===a?t.nameCn:t.nameEn),this.validSubmitStatus()},validSubmitStatus(){const{isReplenish:t,formData:e,fileList:s}=this;if(e.companyName&&e.companyName.trim())if(e.companyCountryName&&e.companyCountryName.trim())if(e.companyAddress&&e.companyAddress.trim()){if(!t){if(!e.countryName||!e.countryName.trim())return void(this.isSubmit=!1);if(!e.address||!e.address.trim())return void(this.isSubmit=!1);if(0===s.length)return void(this.isSubmit=!1)}this.isSubmit=!0}else this.isSubmit=!1;else this.isSubmit=!1;else this.isSubmit=!1},async submit(){const{isSubmit:t,authing:e,isReplenish:s}=this;t&&!e&&(this.authing=!0,s?this.replenish():this.fillInfo())},async fillInfo(){const t=this,{formData:e}=this,{success:s,message:a,data:n}=await Object(c["p"])({authStep:"C3",authItem:"ADDRESS_FORM"});if(s){const s=[];t.fileList.forEach(t=>{s.push(t.fileKey)}),Object(c["b"])({addressList:s,countryId:e.countryId,address:e.address,companyName:e.companyName,companyAddress:e.companyAddress,companyCountryId:e.companyCountryId,ticket:n.ticket}).then(e=>{200===e.code?o["Message"].success({duration:2e3,offset:52,customClass:"is-success",message:t.$$t("{#提交成功#}"),onClose(){if(e.data.isHit){const e=`/${t.lang}/mkyc/c4`;window.location.replace(window.location.origin+e)}else t.go()}}):(t.authing=!1,t.showToast(e.message))}).catch(()=>{t.authing=!1})}else t.authing=!1,t.showToast(a)},replenish(){const{formData:t}=this,e=this;Object(c["a"])({companyName:t.companyName,companyAddress:t.companyAddress,companyCountryId:t.companyCountryId}).then(t=>{200===t.code?o["Message"].success({duration:2e3,offset:52,customClass:"is-success",message:e.$$t("{#提交成功#}"),onClose(){m()("20010006",()=>{})}}):(e.authing=!1,e.showToast(t.message))}).catch(()=>{e.authing=!1})},go(){const t=Object(l["h"])("source");if(t)window.history.go(-1);else{const t=`/${this.lang}/mkyc/c3-center`;window.location.replace(window.location.origin+t)}}},watch:{"$route.query":{async handler({replenish:t}){this.isReplenish=t&&1===Number(t)},immediate:!0}}},h=p,f=(s("871e"),s("2877")),y=Object(f["a"])(h,a,n,!1,null,"438716b7",null);e["default"]=y.exports},"871e":function(t,e,s){"use strict";s("e684")},"8ff9":function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));const{replace:a}=s("b12e"),n=t=>new Promise((function(e,s){let n=["/jpg","/png","/jpeg"],o=t.type,i=!1,r=o.substring(o.indexOf("/"));for(let t=0;t<n.length;t++)if(n[t]==r){i=!0;break}i||s(a("{#文件仅支持JPG、JPEG、PNG格式#}"));let c=t.size,l=c/1024;(l>5120||l<10)&&s(a("{#文件需大于10KB，小于5M#}"));let u=new FileReader;u.onload=function(t){let n=t.target.result,o=new Image;o.onload=function(){o.width,o.height;e()},o.onerror=function(){s(a("{#文件需大于10KB，小于5M#}"))},o.src=n},u.readAsDataURL(t)})).then(()=>t,t=>Promise.reject(t))},b0fa:function(t,e,s){},c6f6:function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("van-popup",{attrs:{position:"bottom",round:"","z-index":"1900"},on:{"click-overlay":t.closePopup},model:{value:t.showPopupModel,callback:function(e){t.showPopupModel=e},expression:"showPopupModel"}},[e("div",[e("div",{staticClass:"popup-header"},[e("span",{staticClass:"back",on:{click:t.closePopup}}),e("van-search",{attrs:{"left-icon":t.leftIcon,placeholder:t.$$t("{#搜索国家和地区#}")},model:{value:t.filterWords,callback:function(e){t.filterWords=e},expression:"filterWords"}}),e("span",{on:{click:t.closePopup}},[t._v(t._s(t.$$t("{#取消#}")))])],1),e("ul",{staticClass:"popup-content"},t._l(t.finallyCountryList,(function(s){return e("li",{key:s["country_id"]||s["countryId"],on:{click:function(e){return t.handleClick(s)}}},[e("i",{staticClass:"national-flag",style:{background:`url(${t.getCountryFlag(s.countryId||s.country_id)}) center/contain no-repeat`}}),e("span",[t._v(" "+t._s("zh-cn"===t.lang?s["nameCn"]||s["name_cn"]:s["nameEn"]||s["name_en"])+" ")])])})),0)])])},n=[],o=s("f3e4"),i=s("ca00");const r=s("d079");var c={props:{countryList:{type:Array,default:()=>[]},showPopup:{type:Boolean,default:!1},addressType:{type:String,default:"country"}},data(){return{lang:o["a"].get("lang"),showPopupModel:!1,filterWords:"",leftIcon:r,finallyCountryList:[]}},watch:{showPopup:{handler(t){this.showPopupModel=t}},filterWords:{handler(t){const e=t.toLowerCase();this.finallyCountryList=t?this.countryList.filter(t=>t.nameCn?t.nameEn.toLowerCase().indexOf(e)>=0||t.nameCn.indexOf(e)>=0:t.name_cn?t.name_en.toLowerCase().indexOf(e)>=0||t.name_cn.indexOf(e)>=0:void 0):this.countryList}},countryList:{handler(t){console.log("val :>> ",t),this.finallyCountryList=t}}},methods:{getCountryFlag:i["g"],closePopup(){this.$emit("closePopup")},handleClick(t){this.$emit("onConfirm",t),this.closePopup()}}},l=c,u=(s("e9d8"),s("2877")),d=Object(u["a"])(l,a,n,!1,null,"56f5adc4",null);e["a"]=d.exports},d079:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAWCAYAAADafVyIAAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJdSURBVHgBtVVdchJBEO4eCODbHmHyGMWSrSRaSFnCCcQTBE4QbhA4AeYGeILEE8CLQhl1sYzoW/YIW6WWbGqZtmdhlw27wGJVvgeYv+5vpvvrXoB7Bq7bsCzL+O1lS3vZzCtQIAnRQCJnpuirAjV4cfx4AP9LMLJ+niql2rxpbLC1mahTOSz2IC2BvvWUChdAVIW0ENgumwedVASjLxOLCErBnAAcVHROOBsjoUNI/KJsHRFe8rZMQxISjKxJlxS0QucE5w8ybts0TWfVaGj9kKSoy8b1YI3D1UwKF84NLAkqfxMeVtSpHD9qwxZ8+DTp8WtOFo6cvHD3Vy8k5h5zZxHOXhrnGm7Gbekw6jH/G3+9fGP1jFg4rQYLnvLeQkrU+LY6R8u7xcUhdDxhkTD9zLT6DpEVvdA/4pMYAXieDCac2DHsCFaPHZnKGEGGvDApJDYWViL6XDub9sWfPbDDCYG0thisosDtJBgTxiMganNZ2f4BVsKvWb4Ku0CIk2DIxRgn8H8VhcrZQ+imfYVfP4CNYJ6kQJ9gmr19E+iZIacq14U0zlW+H1mykxToE+gwCaUivQQbw8+Tm/cfr0tJzrmC6wvncrlKg6Szd5rd8Op7mxvX2Z0DnDji2KIghxQaBFRf18Z5/ZLbRTPaLmLfgySSDbCJ1DtEcRpdg1u3Vi6btp6IVYuy7kMC97no1rYMP1/cEAvCNZ8fFVt6HNmWkMv3h0MtgA2fzOWLvlWVQIlKGCSUAzMYV54WY3IcXV23SIiIOLBXPjxobiXYBVoUIiMueCi5aF8/O3p4+Q/Z/QV6pG16wwAAAABJRU5ErkJggg=="},d734:function(t,e,s){"use strict";s("b0fa")},dc92:function(t,e,s){},e100:function(t,e,s){},e684:function(t,e,s){},e9d8:function(t,e,s){"use strict";s("dc92")},ef32:function(t,e,s){"use strict";s("e100")}}]);