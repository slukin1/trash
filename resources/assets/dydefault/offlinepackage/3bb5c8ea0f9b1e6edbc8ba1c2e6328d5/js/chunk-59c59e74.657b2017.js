(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59c59e74"],{"077b":function(t,e,a){},"0fde":function(t,e,a){"use strict";a("8138")},1549:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"btn"},[t._t("default"),e("p",{staticClass:"button",class:{active:t.canClick},on:{click:t.btnClick}},[t.loading?e("span",{staticClass:"btn-loading"}):t._e(),t.loading?t._e():e("span",[t._v(t._s(t.btnTextVal))])])],2)},n=[],i=a("ca00"),o={props:{btnText:{type:String,default:""},loading:{type:Boolean,default:!1},canClick:{type:Boolean,default:!1}},data(){return{}},computed:{btnTextVal(){return this.btnText||this.$$t("{#提交#}")}},created(){},methods:{ts:i["k"],btnClick(){this.$emit("btnClick")}}},r=o,c=(a("4d1d"),a("2877")),l=Object(c["a"])(r,s,n,!1,null,"74d603cb",null);e["a"]=l.exports},2571:function(t,e,a){"use strict";a("71fa")},"2bba":function(t,e,a){"use strict";a("955b")},"340b":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"step"},[e("div",{staticClass:"step-img"}),e("ul",{staticClass:"step-name"},[e("li",[e("p",[t._v(t._s(t.$$t("{#填写申请单#}")))])]),e("li",[e("p",[t._v(t._s(t.$$t("{#制作卡片#}")))])]),e("li",[e("p",[t._v(t._s(t.$$t("{#邮寄#}")))])])])])},n=[],i={props:{}},o=i,r=(a("782c"),a("2877")),c=Object(r["a"])(o,s,n,!1,null,"5f993ce4",null);e["a"]=c.exports},"4d1d":function(t,e,a){"use strict";a("a4e1")},"5a0c":function(t,e,a){!function(e,a){t.exports=a()}(0,(function(){"use strict";var t=1e3,e=6e4,a=36e5,s="millisecond",n="second",i="minute",o="hour",r="day",c="week",l="month",u="quarter",d="year",f="date",h="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],a=t%100;return"["+t+(e[(a-20)%10]||e[a]||e[0])+"]"}},$=function(t,e,a){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(a)+t},v={s:$,z:function(t){var e=-t.utcOffset(),a=Math.abs(e),s=Math.floor(a/60),n=a%60;return(e<=0?"+":"-")+$(s,2,"0")+":"+$(n,2,"0")},m:function t(e,a){if(e.date()<a.date())return-t(a,e);var s=12*(a.year()-e.year())+(a.month()-e.month()),n=e.clone().add(s,l),i=a-n<0,o=e.clone().add(s+(i?-1:1),l);return+(-(s+(a-n)/(i?n-o:o-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:l,y:d,w:c,d:r,D:f,h:o,m:i,s:n,ms:s,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},y="en",w={};w[y]=p;var C=function(t){return t instanceof k},_=function t(e,a,s){var n;if(!e)return y;if("string"==typeof e){var i=e.toLowerCase();w[i]&&(n=i),a&&(w[i]=a,n=i);var o=e.split("-");if(!n&&o.length>1)return t(o[0])}else{var r=e.name;w[r]=e,n=r}return!s&&n&&(y=n),n||!s&&y},D=function(t,e){if(C(t))return t.clone();var a="object"==typeof e?e:{};return a.date=t,a.args=arguments,new k(a)},b=v;b.l=_,b.i=C,b.w=function(t,e){return D(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var k=function(){function p(t){this.$L=_(t.locale,null,!0),this.parse(t)}var $=p.prototype;return $.parse=function(t){this.$d=function(t){var e=t.date,a=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var s=e.match(m);if(s){var n=s[2]-1||0,i=(s[7]||"0").substring(0,3);return a?new Date(Date.UTC(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)):new Date(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},$.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},$.$utils=function(){return b},$.isValid=function(){return!(this.$d.toString()===h)},$.isSame=function(t,e){var a=D(t);return this.startOf(e)<=a&&a<=this.endOf(e)},$.isAfter=function(t,e){return D(t)<this.startOf(e)},$.isBefore=function(t,e){return this.endOf(e)<D(t)},$.$g=function(t,e,a){return b.u(t)?this[e]:this.set(a,t)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(t,e){var a=this,s=!!b.u(e)||e,u=b.p(t),h=function(t,e){var n=b.w(a.$u?Date.UTC(a.$y,e,t):new Date(a.$y,e,t),a);return s?n:n.endOf(r)},m=function(t,e){return b.w(a.toDate()[t].apply(a.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(e)),a)},g=this.$W,p=this.$M,$=this.$D,v="set"+(this.$u?"UTC":"");switch(u){case d:return s?h(1,0):h(31,11);case l:return s?h(1,p):h(0,p+1);case c:var y=this.$locale().weekStart||0,w=(g<y?g+7:g)-y;return h(s?$-w:$+(6-w),p);case r:case f:return m(v+"Hours",0);case o:return m(v+"Minutes",1);case i:return m(v+"Seconds",2);case n:return m(v+"Milliseconds",3);default:return this.clone()}},$.endOf=function(t){return this.startOf(t,!1)},$.$set=function(t,e){var a,c=b.p(t),u="set"+(this.$u?"UTC":""),h=(a={},a[r]=u+"Date",a[f]=u+"Date",a[l]=u+"Month",a[d]=u+"FullYear",a[o]=u+"Hours",a[i]=u+"Minutes",a[n]=u+"Seconds",a[s]=u+"Milliseconds",a)[c],m=c===r?this.$D+(e-this.$W):e;if(c===l||c===d){var g=this.clone().set(f,1);g.$d[h](m),g.init(),this.$d=g.set(f,Math.min(this.$D,g.daysInMonth())).$d}else h&&this.$d[h](m);return this.init(),this},$.set=function(t,e){return this.clone().$set(t,e)},$.get=function(t){return this[b.p(t)]()},$.add=function(s,u){var f,h=this;s=Number(s);var m=b.p(u),g=function(t){var e=D(h);return b.w(e.date(e.date()+Math.round(t*s)),h)};if(m===l)return this.set(l,this.$M+s);if(m===d)return this.set(d,this.$y+s);if(m===r)return g(1);if(m===c)return g(7);var p=(f={},f[i]=e,f[o]=a,f[n]=t,f)[m]||1,$=this.$d.getTime()+s*p;return b.w($,this)},$.subtract=function(t,e){return this.add(-1*t,e)},$.format=function(t){var e=this,a=this.$locale();if(!this.isValid())return a.invalidDate||h;var s=t||"YYYY-MM-DDTHH:mm:ssZ",n=b.z(this),i=this.$H,o=this.$m,r=this.$M,c=a.weekdays,l=a.months,u=function(t,a,n,i){return t&&(t[a]||t(e,s))||n[a].slice(0,i)},d=function(t){return b.s(i%12||12,t,"0")},f=a.meridiem||function(t,e,a){var s=t<12?"AM":"PM";return a?s.toLowerCase():s},m={YY:String(this.$y).slice(-2),YYYY:b.s(this.$y,4,"0"),M:r+1,MM:b.s(r+1,2,"0"),MMM:u(a.monthsShort,r,l,3),MMMM:u(l,r),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:u(a.weekdaysMin,this.$W,c,2),ddd:u(a.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:b.s(i,2,"0"),h:d(1),hh:d(2),a:f(i,o,!0),A:f(i,o,!1),m:String(o),mm:b.s(o,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:n};return s.replace(g,(function(t,e){return e||m[t]||n.replace(":","")}))},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(s,f,h){var m,g=b.p(f),p=D(s),$=(p.utcOffset()-this.utcOffset())*e,v=this-p,y=b.m(this,p);return y=(m={},m[d]=y/12,m[l]=y,m[u]=y/3,m[c]=(v-$)/6048e5,m[r]=(v-$)/864e5,m[o]=v/a,m[i]=v/e,m[n]=v/t,m)[g]||v,h?y:b.a(y)},$.daysInMonth=function(){return this.endOf(l).$D},$.$locale=function(){return w[this.$L]},$.locale=function(t,e){if(!t)return this.$L;var a=this.clone(),s=_(t,e,!0);return s&&(a.$L=s),a},$.clone=function(){return b.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},p}(),A=k.prototype;return D.prototype=A,[["$ms",s],["$s",n],["$m",i],["$H",o],["$W",r],["$M",l],["$y",d],["$D",f]].forEach((function(t){A[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),D.extend=function(t,e){return t.$i||(t(e,k,D),t.$i=!0),D},D.locale=_,D.isDayjs=C,D.unix=function(t){return D(1e3*t)},D.en=w[y],D.Ls=w,D.p={},D}))},"5f95":function(t,e,a){"use strict";a("077b")},"71fa":function(t,e,a){},"782c":function(t,e,a){"use strict";a("c005")},8138:function(t,e,a){},"8f18":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"100%",height:"100%"}},[[t.showLoading?e("Loading"):t._e()],t.showLoading?t._e():e("div",{staticClass:"main"},[[t.C0Passed?e("BasePassed",{attrs:{isDm:37===t.formData.nationality}}):e("section",{staticClass:"base"},[e("h2",[t._v(t._s(t.$$t("{#请准确填写您的身份验证信息#}")))]),e("van-form",{ref:"formDataRef"},[e("van-field",{staticClass:"triangle",class:{country:t.showFlag&&t.formData.nationality},attrs:{readonly:"",clickable:"",name:"picker",value:t.formData.nationalityName,label:t.$$t("{#国籍#}"),placeholder:t.$$t("{#请选择国籍#}"),rules:[{required:!0,message:t.$$t("{#请选择国籍#}")}]},on:{click:function(e){return t.chooseCountry("nationality")}},scopedSlots:t._u([t.showFlag&&t.formData.nationality?{key:"button",fn:function(){return[e("i",{staticClass:"national-flag",style:{background:`url(${t.getCountryFlag(t.formData.nationality)}) center/contain no-repeat`}})]},proxy:!0}:null],null,!0)}),37===t.formData.nationality?[e("van-field",{attrs:{name:"cardNumber",label:t.$$t("{#证件号码#}"),placeholder:t.$$t("{#请输入证件号码#}"),"show-error-message":"true",rules:[{required:!0,message:t.$$t("{#请填写正确的证件号码#}")},{validator:t.validatorCardNum,trigger:"onBlur",message:t.$$t("{#请填写正确的证件号码#}")}]},model:{value:t.formData.cardNumber,callback:function(e){t.$set(t.formData,"cardNumber",e)},expression:"formData.cardNumber"}})]:t._e(),e("van-field",{attrs:{name:"firstName",label:t.$$t("{#姓#}"),placeholder:t.$$t("{#请输入姓#}"),"show-error-message":"true",rules:[{required:!0,message:t.$$t("{#请填写正确的姓氏#}")},{validator:t.validatorInput,trigger:"onBlur",message:t.$$t("{#请填写正确的姓氏#}")},{validator:t.validatorEn,trigger:"onBlur",message:t.$$t("{#姓氏请用英文输入#}")}]},model:{value:t.formData.firstName,callback:function(e){t.$set(t.formData,"firstName",e)},expression:"formData.firstName"}}),e("van-field",{attrs:{name:t.$$t("{#lastName#}"),label:t.$$t("{#名#}"),placeholder:t.$$t("{#请输入名#}"),"show-error-message":"true",rules:[{required:!0,message:t.$$t("{#请填写正确的名字#}")},{pattern:/^(?!\d+$)[^\?\!\,\.]*?$/,trigger:"onBlur",message:t.$$t("{#请填写正确的名字#}")},{validator:t.validatorEn,trigger:"onBlur",message:t.$$t("{#名字请用英文输入#}")}]},model:{value:t.formData.lastName,callback:function(e){t.$set(t.formData,"lastName",e)},expression:"formData.lastName"}}),88===t.formData.nationality?[e("van-field",{attrs:{name:"local_first_name",label:t.$$t("{#英文姓#}"),placeholder:t.$$t("{#请输入英文姓#}"),"show-error-message":"true",rules:[{required:!0,message:t.$$t("{#请填写正确的姓氏#}")},{validator:t.validatorInput,trigger:"onBlur",message:t.$$t("{#请填写正确的姓氏#}")},{validator:t.validatorKorea,trigger:"onBlur",message:t.$$t("{#姓氏请用英文输入#}")}]},model:{value:t.formData.local_first_name,callback:function(e){t.$set(t.formData,"local_first_name",e)},expression:"formData.local_first_name"}}),e("van-field",{attrs:{name:"local_last_name",label:t.$$t("{#英文名#}"),placeholder:t.$$t("{#请输入英文名#}"),"show-error-message":"true",rules:[{required:!0,message:t.$$t("{#请填写正确的名字#}")},{pattern:/^(?!\d+$)[^\?\!\,\.]*?$/,trigger:"onBlur",message:t.$$t("{#请填写正确的名字#}")},{validator:t.validatorKorea,trigger:"onBlur",message:t.$$t("{#名字请用英文输入#}")}]},model:{value:t.formData.local_last_name,callback:function(e){t.$set(t.formData,"local_last_name",e)},expression:"formData.local_last_name"}})]:t._e(),e("van-field",{staticClass:"triangle",attrs:{readonly:"",clickable:"",value:t.formData.birthString,label:t.$$t("{#生日#}"),placeholder:t.$$t("{#MM/DD/YYYY#}"),rules:[{required:!0,message:t.$$t("{#请输入生日#}")},{validator:t.validatorAge,trigger:"onBlur",message:t.$$t("{#未满18岁#}")}]},on:{click:function(e){t.showDataTimePicker=!0}}}),e("van-popup",{attrs:{position:"bottom"},model:{value:t.showDataTimePicker,callback:function(e){t.showDataTimePicker=e},expression:"showDataTimePicker"}},[e("van-datetime-picker",{attrs:{type:"date","cancel-button-text":t.$$t("{#取消#}"),"confirm-button-text":t.$$t("{#确认#}"),"item-height":"60","visible-item-count":"8","min-date":t.minDate,"max-date":t.maxDate},on:{cancel:function(e){t.showDataTimePicker=!1},confirm:t.onConfirmDate},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)],2),e("Btn",{attrs:{"can-click":!0},on:{btnClick:t.goBaseAuth,loading:t.authIng}},[37===t.formData.nationality?e("div",{staticClass:"cn-tips"},[t._v(" "+t._s(t.$$t("{#申请成为多米尼克元宇宙数字公民#}"))+" ")]):t._e()])],1),e("CountryPopup",{attrs:{"show-popup":t.showPopup,"country-list":t.countryList},on:{closePopup:t.closePopup,onConfirm:t.onConfirm}})]],2)],2)},n=[],i=a("5c96"),o=a("aa0e"),r=a.n(o),c=a("5a0c"),l=a.n(c),u=a("7c15"),d=a("f3e4"),f=a("ca00"),h=a("d938"),m=a("340b"),g=function(){var t=this,e=t._self._c;return e("section",{staticClass:"passed"},[e("div",{staticClass:"passed-content"},[e("p",{staticClass:"logo"}),e("p",{staticClass:"title"},[t._v(t._s(t.$$t("{#认证成功#}")))]),t.isDm?[e("p",{staticClass:"desc",domProps:{innerHTML:t._s(t.ts(t.$$t("{#您已成为%s数字公民L1#}"),"zh-cn"===t.lang?"多米尼克国":"Dominica"))}})]:[e("p",{staticClass:"desc"},[t._v(" "+t._s(t.$$t("{#您已通过基础认证 获得【现货】【合约】基础权益#}"))+" ")])]],2),t.isDm?[e("ul",{staticClass:"auth-box"},t._l(t.showInfo,(function(a,s){return e("li",{key:s,staticClass:"auth-info"},[e("span",{staticClass:"name"},[t._v(t._s(a.name)+":")]),"countryId"===a.value?[e("span",{staticClass:"value"},[t._v(t._s("zh-cn"===t.lang?"多米尼克国":"Dominica"))])]:[e("span",{staticClass:"value"},[t._v(t._s(t.baseInfo[a.value]||"--"))])]],2)})),0),e("div",{staticClass:"btn-over"},[e("p",{on:{click:t.goLv2}},[t._v(t._s(t.$$t("{#继续进行L2初级认证#}")))])])]:[e("div",{staticClass:"passed-guide"},[e("div",{staticClass:"box",on:{click:function(e){return t.goNative("spot")}}},[e("p",{staticClass:"title"},[t._v(t._s(t.$$t("{#法币入金#}")))]),e("p",{staticClass:"desc"},[t._v(t._s(t.$$t("{#用于购买BTC、ETH等虚拟币资产#}")))])]),e("div",{staticClass:"box",on:{click:function(e){return t.goNative("contract")}}},[e("p",{staticClass:"title"},[t._v(t._s(t.$$t("{#合约交易#}")))]),e("p",{staticClass:"desc"},[t._v(t._s(t.$$t("{#购买数字资产合约#}")))])])]),e("div",{staticClass:"btn-goV2",on:{click:t.goLv2}},[t._v(t._s(t.$$t("{#进入初级认证#}"))),e("i")])]],2)},p=[],$={props:{step:{type:String,default:"1"},isDm:{type:Boolean,default:!1}},data(){return{lang:d["a"].get("lang"),baseInfo:{},showInfo:[{name:this.$$t("{#姓#}"),value:"firstName"},{name:this.$$t("{#名#}"),value:"lastName"},{name:this.$$t("{#国籍#}"),value:"countryId"},{name:this.$$t("{#证件号码#}"),value:"cardNumber"},{name:this.$$t("{#生日#}"),value:"fullBirthStr"}]}},created(){this.isDm&&this.getAuthInfo()},methods:{ts:f["k"],async getAuthInfo(){const{success:t,message:e,data:a}=await Object(u["i"])();t?(this.showLoading=!1,this.baseInfo=a.baseInfo):this.showToast(e)},goLv2(){this.$pushState("/mkyc/card?isDm="+this.isDm)},goNative(t){let e;switch(t){case"spot":e="20010014";break;case"contract":e="20010015";break;default:}r()(e,()=>{})},goNext(){window.sensors.track("h5_kyc_self_c0_success"),r()("20010006",()=>{})},showToast(t){i["Message"].error({duration:2e3,offset:52,customClass:"is-error",message:t,onClose(){r()("20010006",()=>{})}})}}},v=$,y=(a("0fde"),a("2877")),w=Object(y["a"])(v,g,p,!1,null,"616a5afc",null),C=w.exports,_=a("1549"),D=a("c6f6"),b={data(){return{C0Passed:!1,showLoading:!0,lang:d["a"].get("lang"),authIng:!1,formData:{cardNumber:"",firstName:"",lastName:"",local_first_name:"",local_last_name:"",country:"",nationality:"",countryName:"",nationalityName:"",birth:"",birthString:""},countryList:[],showFlag:!1,showPicker:!1,showDataTimePicker:!1,currentDate:new Date,minDate:new Date(1900,0,1),maxDate:new Date,currentCountryType:"country",showPopup:!1}},components:{Message:i["Message"],Loading:h["a"],Step:m["a"],BasePassed:C,Btn:_["a"],CountryPopup:D["a"]},created(){this.init(),this.getCountryList(),window.sensors.track("h5_kyc_self_stepPage_expose")},methods:{getCountryFlag:f["g"],validatorAge(t){return Object(f["a"])(t)>=18},validatorInput(t){return!/\d/.test(t)&&!new RegExp("/[^S\n\r\t]/ig").test(t)&&!new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>《》/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？]").test(t)},validatorCardNum(t){return new RegExp("^[A-Za-z0-9]+$").test(t)},validatorKorea(t){return 88!==this.formData.nationality||/^[A-Za-z]*(\s[A-Za-z]*)*$/.test(t)},validatorEn(t){return 37!==this.formData.nationality||/^[A-Za-z]*(\s[A-Za-z]*)*$/.test(t)},async init(){const t=this,e=t.$store.state.stageData.authBizCode,a=await Object(u["i"])({authBizCode:e});if(200===a.code){const{finalAuthState:e,stepStates:s}=a.data;if(2===e)return void t.showToast(t.$$t("{#您已认证#}"));const n=["C2","C1","C0"];for(let a=0,i=n.length;a<i;a+=1){const e=s.find(t=>t.authStep.toLowerCase()===n[a].toLowerCase());if("C2"===n[a]){if(!e||e&&[0,3,4].includes(e.authState))continue;console.log("c2 :>> ","关闭"),t.showToast(t.$$t("{#您已认证#}"));break}if("C1"===n[a]){if(!e||e&&[0,3,4].includes(e.authState))continue;console.log("c1 :>> ","打开C2"),t.goC2();break}!e||e&&[0,3,4].includes(e.authState)?t.showLoading=!1:t.goC1()}}else t.showToast(a.message)},goC1(){const t=d["a"].get("lang");window.location.replace(`${window.location.origin}/${t}/mkyc/card`)},goC2(){woodpecker&&woodpecker.metrics&&woodpecker.metrics.gauge("kyc_c2_living",1,"开始活体");const t=this;r()("20010087",({code:e,msg:a,data:s=null})=>{0===e?(t.showToast(a),woodpecker&&woodpecker.metrics&&woodpecker.metrics.gauge("kyc_c2_living",1,"调app活体失败")):200===e?s?(this.uploadPic(Object(f["e"])(s),a),woodpecker&&woodpecker.metrics&&woodpecker.metrics.gauge("kyc_c2_living",1,"华为活体")):(i["Message"].success({duration:2e3,offset:52,customClass:"is-success",message:t.$$t("{#提交成功#}"),onClose(){t.goAuth()}}),woodpecker&&woodpecker.metrics&&woodpecker.metrics.gauge("kyc_c2_living",1,"jumio活体")):(woodpecker&&woodpecker.metrics.gauge("kyc_c2_living",1,"调app活体失败"),t.goAuth())})},async uploadPic(t,e){const a=this,s={fileExtensionName:"."+t.type.split("/")[1],fileType:5},{success:n,message:i,data:o}=await Object(u["q"])(s);if(n){const s=new Date;Object(u["x"])(o.url,t).then(()=>{const t=new Date;window.sensors.track("h5_kyc_self_upload_time",{time:t-s,desc:"毫秒"}),a.livingSubmitFun(o.fileKey,e)}).catch(t=>{a.showToast(t),woodpecker&&woodpecker.metrics.gauge("kyc_c2_living_upload",1,"活体上传失败")})}else a.showToast(i)},async livingSubmitFun(t,e){const a=this;Object(u["s"])({reasonCode:200,livingBody:t,ticket:e}).then(t=>{200===t.code?i["Message"].success({duration:2e3,offset:52,customClass:"is-success",message:a.$$t("{#提交成功#}"),onClose(){a.goAuth()}}):a.showToast(t.message)}).catch(t=>{woodpecker&&woodpecker.metrics&&woodpecker.metrics.gauge("kyc_c3_submit",1,"c3提交接口报错"),i["Message"].error({duration:2e3,offset:52,customClass:"is-error",message:t,onClose(){a.goAuth()}})})},showToast(t){const e=this;i["Message"].error({duration:2e3,offset:52,customClass:"is-error",message:t,onClose(){e.authIng=!1,e.goAuth()}})},goAuth(){r()("20010006",()=>{})},async getCountryList(){const t=this,{success:e,data:a,message:s}=await Object(u["o"])();e?this.countryList=a:t.showToast(s)},chooseCountry(t){this.currentCountryType=t,this.showPopup=!0},closePopup(){this.showPopup=!1},onConfirm(t){const e=this.currentCountryType;"country"===e?(this.formData.country=t.countryId,this.formData.countryName="zh-cn"===this.lang?t.nameCn:t.nameEn):(this.formData.nationality=t.countryId,this.formData.nationalityName="zh-cn"===this.lang?t.nameCn:t.nameEn),this.showFlag=!0,this.formData.firstName&&this.$refs.formDataRef.validateField("firstName"),this.formData.lastName&&this.$refs.formDataRef.validateField("lastName")},onConfirmDate(t){this.formData.birthString=l()(t).format("MM/DD/YYYY"),this.formData.birth=+t,this.showDataTimePicker=!1},goBaseAuth(){this.$refs.formDataRef.validate().then(()=>{this.submitC0()}).catch(()=>{})},async submitC0(){const t=this;t.authIng=!0;const e=t.$store.state.stageData.authBizCode,a={authStep:"C0",authItem:"C0_SELF",authBizCode:e},{success:s,message:n,data:o}=await Object(u["p"])(a);if(s){const{firstName:e,lastName:a,country:s,nationality:n,birth:r,local_first_name:c,local_last_name:l,cardNumber:d}=t.formData;Object(u["u"])({firstName:88===n?c:e,lastName:88===n?l:a,local_first_name:88===n?e:"",local_last_name:88===n?a:"",country:s,nationality:n,birth:r,ticket:o.ticket,cardNumber:d}).then(e=>{200===e.code?t.C0Passed=!0:(woodpecker&&woodpecker.metrics&&woodpecker.metrics.gauge("kyc_c0_submit",1,"c0提交参数缺失，具体信息接口返回了"),t.showToast(e.message))}).catch(e=>{woodpecker&&woodpecker.metrics&&woodpecker.metrics.gauge("kyc_c0_submit",1,"c0提交接口报错"),i["Message"].error({duration:2e3,offset:52,customClass:"is-error",message:e,onClose(){t.goAuth()}})})}else t.showToast(n)}}},k=b,A=(a("5f95"),a("2571"),Object(y["a"])(k,s,n,!1,null,"09182f09",null));e["default"]=A.exports},"955b":function(t,e,a){},a4e1:function(t,e,a){},c005:function(t,e,a){},c6f6:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("van-popup",{attrs:{position:"bottom",round:"","z-index":"1900"},on:{"click-overlay":t.closePopup},model:{value:t.showPopupModel,callback:function(e){t.showPopupModel=e},expression:"showPopupModel"}},[e("div",[e("div",{staticClass:"popup-header"},[e("span",{staticClass:"back",on:{click:t.closePopup}}),e("van-search",{attrs:{"left-icon":t.leftIcon,placeholder:t.$$t("{#搜索国家和地区#}")},model:{value:t.filterWords,callback:function(e){t.filterWords=e},expression:"filterWords"}}),e("span",{on:{click:t.closePopup}},[t._v(t._s(t.$$t("{#取消#}")))])],1),e("ul",{staticClass:"popup-content"},t._l(t.finallyCountryList,(function(a){return e("li",{key:a["country_id"]||a["countryId"],on:{click:function(e){return t.handleClick(a)}}},[e("i",{staticClass:"national-flag",style:{background:`url(${t.getCountryFlag(a.countryId||a.country_id)}) center/contain no-repeat`}}),e("span",[t._v(" "+t._s("zh-cn"===t.lang?a["nameCn"]||a["name_cn"]:a["nameEn"]||a["name_en"])+" ")])])})),0)])])},n=[],i=a("f3e4"),o=a("ca00");const r=a("d079");var c={props:{countryList:{type:Array,default:()=>[]},showPopup:{type:Boolean,default:!1},addressType:{type:String,default:"country"}},data(){return{lang:i["a"].get("lang"),showPopupModel:!1,filterWords:"",leftIcon:r,finallyCountryList:[]}},watch:{showPopup:{handler(t){this.showPopupModel=t}},filterWords:{handler(t){const e=t.toLowerCase();this.finallyCountryList=t?this.countryList.filter(t=>t.nameCn?t.nameEn.toLowerCase().indexOf(e)>=0||t.nameCn.indexOf(e)>=0:t.name_cn?t.name_en.toLowerCase().indexOf(e)>=0||t.name_cn.indexOf(e)>=0:void 0):this.countryList}},countryList:{handler(t){console.log("val :>> ",t),this.finallyCountryList=t}}},methods:{getCountryFlag:o["g"],closePopup(){this.$emit("closePopup")},handleClick(t){this.$emit("onConfirm",t),this.closePopup()}}},l=c,u=(a("e9d8"),a("2877")),d=Object(u["a"])(l,s,n,!1,null,"56f5adc4",null);e["a"]=d.exports},d079:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAWCAYAAADafVyIAAAACXBIWXMAABCcAAAQnAEmzTo0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJdSURBVHgBtVVdchJBEO4eCODbHmHyGMWSrSRaSFnCCcQTBE4QbhA4AeYGeILEE8CLQhl1sYzoW/YIW6WWbGqZtmdhlw27wGJVvgeYv+5vpvvrXoB7Bq7bsCzL+O1lS3vZzCtQIAnRQCJnpuirAjV4cfx4AP9LMLJ+niql2rxpbLC1mahTOSz2IC2BvvWUChdAVIW0ENgumwedVASjLxOLCErBnAAcVHROOBsjoUNI/KJsHRFe8rZMQxISjKxJlxS0QucE5w8ybts0TWfVaGj9kKSoy8b1YI3D1UwKF84NLAkqfxMeVtSpHD9qwxZ8+DTp8WtOFo6cvHD3Vy8k5h5zZxHOXhrnGm7Gbekw6jH/G3+9fGP1jFg4rQYLnvLeQkrU+LY6R8u7xcUhdDxhkTD9zLT6DpEVvdA/4pMYAXieDCac2DHsCFaPHZnKGEGGvDApJDYWViL6XDub9sWfPbDDCYG0thisosDtJBgTxiMganNZ2f4BVsKvWb4Ku0CIk2DIxRgn8H8VhcrZQ+imfYVfP4CNYJ6kQJ9gmr19E+iZIacq14U0zlW+H1mykxToE+gwCaUivQQbw8+Tm/cfr0tJzrmC6wvncrlKg6Szd5rd8Op7mxvX2Z0DnDji2KIghxQaBFRf18Z5/ZLbRTPaLmLfgySSDbCJ1DtEcRpdg1u3Vi6btp6IVYuy7kMC97no1rYMP1/cEAvCNZ8fFVt6HNmWkMv3h0MtgA2fzOWLvlWVQIlKGCSUAzMYV54WY3IcXV23SIiIOLBXPjxobiXYBVoUIiMueCi5aF8/O3p4+Q/Z/QV6pG16wwAAAABJRU5ErkJggg=="},d938:function(t,e,a){"use strict";var s=function(){var t=this;t._self._c;return t._m(0)},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"loading-container"},[e("div",{staticClass:"loading-img"})])}],i={name:"Loading",components:{},props:{},data(){return{}},created(){},methods:{}},o=i,r=(a("2bba"),a("2877")),c=Object(r["a"])(o,s,n,!1,null,"0610fe42",null);e["a"]=c.exports},dc92:function(t,e,a){},e9d8:function(t,e,a){"use strict";a("dc92")}}]);